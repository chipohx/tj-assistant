# TJ Assistant - AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ —Å—Ç–∞—Ç—å—è–º –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ñ—É—Ä–Ω–∞–ª–∞

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç —Å RAG (Retrieval-Augmented Generation) –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ —Å—Ç–∞—Ç–µ–π –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ñ—É—Ä–Ω–∞–ª–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

- **Frontend** (React + Vite) - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
- **Backend** (FastAPI) - API –¥–ª—è —á–∞—Ç–∞, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç—ã —Å –ë–î –Ω–∞ –ø–æ—Ä—Ç—É 8000
- **ML Service** (FastAPI + LangChain) - RAG —Å–∏—Å—Ç–µ–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GigaChat –∏ OpenRouter –Ω–∞ –ø–æ—Ä—Ç—É 8001
- **Qdrant** - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–∞ –ø–æ—Ä—Ç—É 6333
- **PostgreSQL** - —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —á–∞—Ç–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 5432

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Python 3.11+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Node.js 25+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ frontend)

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

### 1. GigaChat API Key

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ GigaChat –≤ –∫–∞—á–µ—Å—Ç–≤–µ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [developers.sber.ru](https://developers.sber.ru/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª [GigaChat API](https://developers.sber.ru/portal/products/gigachat-api)
3. –ü–æ–ª—É—á–∏—Ç–µ AUTH_KEY
4. –ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ `GIGACHAT_AUTH_KEY`

**–ü—Ä–∏–º–µ—Ä:**
```
GIGACHAT_AUTH_KEY=NTZj...
```

### 2. OpenRouter API Key

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OpenRouter –≤ –∫–∞—á–µ—Å—Ç–≤–µ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [openrouter.ai](https://openrouter.ai/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Keys](https://openrouter.ai/keys)
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
4. –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ `OPENROUTER_API_KEY`

**–ü—Ä–∏–º–µ—Ä:**
```
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (.env –∏–ª–∏ docker-compose.yaml)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `backend/.env` (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `environment` –≤ docker-compose.yaml): (–Ω–∞–¥–æ –Ω–∞–ø–∏—Å–∞—Ç—å, –¥–ª—è —á–µ–≥–æ —ç—Ç–æ—Ç .env)

```env
SECRET_KEY=–≤–∞—à-secret-key
```

### ML Service (.env)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

**–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GigaChat (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```env
LLM_PROVIDER=gigachat
GIGACHAT_AUTH_KEY=–≤–∞—à-gigachat-token
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=tj
EMBEDDING_MODEL_NAME=intfloat/multilingual-e5-large
HF_TOKEN=–≤–∞—à-hf-—Ç–æ–∫–µ–Ω
token=–≤–∞—à-hf_token
```

**–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenRouter (–Ω–∞–ø—Ä–∏–º–µ—Ä, Qwen3):**
```env
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=–≤–∞—à-openrouter-–∫–ª—é—á
OPENROUTER_MODEL=qwen/qwen3-next-80b-a3b-instruct:free
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=tj
EMBEDDING_MODEL_NAME=intfloat/multilingual-e5-large
HF_TOKEN=–≤–∞—à-hf-—Ç–æ–∫–µ–Ω
token=–≤–∞—à-hf_token
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ OpenRouter –º–æ–¥–µ–ª–∏:**
- `qwen/qwen3-next-80b-a3b-instruct:free` - Qwen3 Next 80B (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è)
- `meta-llama/llama-3.1-70b-instruct` - Llama 3.1 70B
- `anthropic/claude-3.5-sonnet` - Claude 3.5 Sonnet
- –°–º. –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞ [openrouter.ai/models](https://openrouter.ai/models)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <repository-url>
cd tj-assistant
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GigaChat (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

LLM_PROVIDER=gigachat
GIGACHAT_AUTH_KEY=–≤–∞—à-gigachat-token
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=tj

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OpenRouter (–Ω–∞–ø—Ä–∏–º–µ—Ä, Qwen3)
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=–≤–∞—à-openrouter-–∫–ª—é—á
OPENROUTER_MODEL=qwen/qwen3-next-80b-a3b-instruct:free
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=tj
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
docker compose up -d --build
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- PostgreSQL
- Qdrant
- –ò–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π ~15-20 –º–∏–Ω—É—Ç)
- ML Service
- Backend
- Frontend

### 4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:

```bash
# –õ–æ–≥–∏ –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä–∞
docker compose logs indexer -f

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
curl -s http://localhost:6333/collections/tj | grep points_count
```

–ö–æ–≥–¥–∞ —É–≤–∏–¥–∏—Ç–µ "–£—Å–ø–µ—Ö! –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é 'tj'." - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.

### 5. –ù–∞–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ë–î

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Backend –∏ Postgres.
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –ø–∞–ø–∫–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –Ω–∞–ø–∏—Å–∞—Ç—å (–æ—Ç–∫—Ä–æ–µ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞): 
```bash
docker compose exec backend bash
alembic init migrations
```

–í –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–∞–ø–∫–∞ migrations, –≤ –Ω–µ–π –≤ —Ñ–∞–π–ª–µ env.py:
1) –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É from app.models.models import Base
2) –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É target_metadata = None –Ω–∞ target_metadata = Base.metadata

–î–∞–ª–µ–µ —Å–Ω–æ–≤–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞):
```bash
alembic revision --autogenerate -m "Init"
alembic upgrade head
```


–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π —Å–ª–µ–¥—É–µ—Ç:
1) –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞):
```bash
docker compose exec backend bash
```
2) –î–∞–ª–µ–µ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É (–æ–Ω–∞ –æ—á–∏—Å—Ç–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∏–≥—Ä–∞—Ü–∏—è—Ö):
```bash
python -c "
import asyncio
from sqlalchemy import text
from app.database.session_async import engine

async def reset():
    async with engine.connect() as conn:
        await conn.execute(text('DROP TABLE IF EXISTS alembic_version'))
        await conn.commit()

asyncio.run(reset())"
```


–ò–ª–∏ –µ—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:
–£–¥–∞–ª–∏—Ç—å –≤ Docker volume —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º tj_assistant_postgres_data

### 7. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:3000**

–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- Email: `test@example.com`
- Password: `testpassword123`

### 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Ç–æ–∫–µ–Ω–æ–≤

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ RAG endpoint –Ω–∞–ø—Ä—è–º—É—é:

```bash
curl -X POST "http://localhost:8001/rag/query" \
  -H "Content-Type: application/json" \
  -d '{"question": "–ö—É–¥–∞ –º–æ–∂–Ω–æ —Å—Ö–æ–¥–∏—Ç—å –≤ –ü–∏—Ç–µ—Ä–µ?", "top_k": 3}'
```

–û—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å—Ö–æ–¥–µ —Ç–æ–∫–µ–Ω–æ–≤:

```json
{
  "answer": "...",
  "context": "...",
  "sources": [...],
  "token_usage": {
    "query_tokens": 15,
    "context_tokens": 1200,
    "prompt_tokens": 1234,
    "completion_tokens": 567,
    "total_tokens": 1801,
    "successful_requests": 1
  }
}
```

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ML —Å–µ—Ä–≤–∏—Å–∞:

```bash
docker compose logs ml | tail -20
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é —Ä–∞–∑–±–∏–≤–∫—É:
```
üìä Token Usage - Query: 15, Context: 1200, Total Input: 1234, Output: 567, Total: 1801
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—Ö–æ–¥ –∏–¥—ë—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ RAG (1200 —Ç–æ–∫–µ–Ω–æ–≤), –∞ —Å–∞–º –≤–æ–ø—Ä–æ—Å –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å–µ–≥–æ 15 —Ç–æ–∫–µ–Ω–æ–≤.

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f <service>          # ml, backend, frontend, qdrant, postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker compose restart <service>

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–≤–∫–ª—é—á–∞—è volumes)
docker compose down -v

# –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –æ—á–∏—Å—Ç–∫–æ–π
curl -X DELETE "http://localhost:6333/collections/tj"
docker compose up -d indexer
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –í—ã–±–æ—Ä LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–ø–æ–∫–∞ 2). –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `LLM_PROVIDER` –≤ `tj-ml/.env`.

#### GigaChat (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```env
LLM_PROVIDER=gigachat
GIGACHAT_AUTH_KEY=–≤–∞—à-gigachat-token
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ GigaChat:**
- `GigaChat` - –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `GigaChat-Pro` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å
- `GigaChat-Plus` - –ø—Ä–µ–º–∏—É–º –º–æ–¥–µ–ª—å

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ GigaChat –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `tj-ml/src/app/services/llm.py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_get_gigachat_llm()`.

#### OpenRouter

```env
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=–≤–∞—à-openrouter-–∫–ª—é—á
OPENROUTER_MODEL=qwen/qwen3-next-80b-a3b-instruct:free
```

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–æ–¥–µ–ª–∏ OpenRouter:**
- `qwen/qwen3-next-80b-a3b-instruct:free` - Qwen3 Next 80B (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è)
- `meta-llama/llama-3.1-70b-instruct` - Llama 3.1 70B
- `anthropic/claude-3.5-sonnet` - Claude 3.5 Sonnet
- `google/gemini-pro-1.5` - Gemini Pro 1.5
- `openai/gpt-4o` - GPT-4o

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π: [openrouter.ai/models](https://openrouter.ai/models)

### –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `intfloat/multilingual-e5-large` (–ª—É—á—à–∞—è –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞).

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏:
1. –û–±–Ω–æ–≤–∏—Ç–µ `EMBEDDING_MODEL_NAME` –≤ `tj-ml/.env`
2. –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- `intfloat/multilingual-e5-large` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, 1024 dim)
- `intfloat/multilingual-e5-base` (–±—ã—Å—Ç—Ä–µ–µ, 768 dim)
- `sentence-transformers/all-MiniLM-L6-v2` (–±—ã—Å—Ç—Ä–∞—è, 384 dim)

## üí∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤

ML —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API.

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ LLM –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞—Å—Ö–æ–¥–µ:

```
üìä Token Usage - Query: 15, Context: 1200, Total Input: 1234, Output: 567, Total: 1801
```

–ì–¥–µ:
- **Query** - —Ç–æ–∫–µ–Ω—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–∞—à –≤–æ–ø—Ä–æ—Å)
- **Context** - —Ç–æ–∫–µ–Ω—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ RAG (–¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î)
- **Total Input (prompt_tokens)** - –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (query + context + —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç)
- **Output (completion_tokens)** - —Ç–æ–∫–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏
- **Total** - —Å—É–º–º–∞ –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤

### –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤

–≠—Ç–∞ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–Ω—è—Ç—å, –æ—Ç–∫—É–¥–∞ –∏–¥—ë—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—Ö–æ–¥:

**–ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞:**
```
Query: 15 —Ç–æ–∫–µ–Ω–æ–≤ (3% –æ—Ç input)
Context: 1200 —Ç–æ–∫–µ–Ω–æ–≤ (97% –æ—Ç input)
Total Input: 1234 —Ç–æ–∫–µ–Ω–∞
Output: 567 —Ç–æ–∫–µ–Ω–æ–≤
```

**–í—ã–≤–æ–¥—ã:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—Ö–æ–¥ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ RAG (97%)
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ `top_k` –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∑–∏—Ç –∑–∞—Ç—Ä–∞—Ç—ã
- –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å–µ–≥–æ 3%

### API Response

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–∞—Ö –≤–∫–ª—é—á–µ–Ω–∞ –≤ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç `/rag/query` —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π:

```json
{
  "answer": "...",
  "context": "...",
  "sources": [...],
  "token_usage": {
    "query_tokens": 15,
    "context_tokens": 1200,
    "prompt_tokens": 1234,
    "completion_tokens": 567,
    "total_tokens": 1801,
    "successful_requests": 1
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π:**
- `query_tokens` - —Ç–æ–∫–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `context_tokens` - —Ç–æ–∫–µ–Ω—ã –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î (RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- `prompt_tokens` - –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (query + context + —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç)
- `completion_tokens` - —Ç–æ–∫–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞ LLM
- `total_tokens` - –æ–±—â–∏–π —Ä–∞—Å—Ö–æ–¥ (prompt + completion)
- `successful_requests` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤

–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã:

**1. –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ RAG:**
```bash
# –í–º–µ—Å—Ç–æ top_k=5 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ top_k=3 –∏–ª–∏ top_k=2
curl -X POST "http://localhost:8001/rag/query" \
  -d '{"question": "...", "top_k": 2}'
```

**2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç:**
- –°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ `rag_chain.py`
- –£–±–µ—Ä–∏—Ç–µ –ª–∏—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ë–æ–ª–µ–µ –¥–µ—à—ë–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ "–¥–æ—Ä–æ–≥–∏–µ" –∑–∞–ø—Ä–æ—Å—ã:**
```bash
docker compose logs ml | grep "Token Usage" | grep "Context: [2-9][0-9][0-9][0-9]"
```
–ù–∞–π–¥—ë—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º > 2000 —Ç–æ–∫–µ–Ω–æ–≤.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ä–∞—Å—Ö–æ–¥–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ ML —Å–µ—Ä–≤–∏—Å–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–æ–∫–µ–Ω–∞–º
docker compose logs ml | grep "Token Usage"

# –†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
docker compose logs ml -f | grep "Token Usage"
```

### –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**OpenRouter:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ [openrouter.ai/models](https://openrouter.ai/models)
- –ú–æ–¥–µ–ª–∏ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `:free` - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ
- –°—Ç–æ–∏–º–æ—Å—Ç—å = (prompt_tokens √ó —Ü–µ–Ω–∞_–∑–∞_1M_input + completion_tokens √ó —Ü–µ–Ω–∞_–∑–∞_1M_output) / 1,000,000

**–ü—Ä–∏–º–µ—Ä –¥–ª—è `qwen/qwen3-next-80b-a3b-instruct:free`:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å, —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –ø–ª–∞—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ (GPT-4o):**
- Input: $2.50 / 1M tokens
- Output: $10.00 / 1M tokens
- –ó–∞–ø—Ä–æ—Å: 1500 input + 500 output = (1500√ó2.5 + 500√ó10) / 1,000,000 = $0.00875

## üìà –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ RAG

ML —Å–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ü–µ–Ω–∫—É
curl -X POST "http://localhost:8001/eval/run" \
  -H "Content-Type: application/json" \
  -d '{"run_name": "test_run"}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl "http://localhost:8001/eval/status?run_id=<run_id>"

# –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á—ë—Ç
curl "http://localhost:8001/eval/report?run_id=<run_id>"
```

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:
1. –ò–∑–º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `top_k` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
2. –ú–µ–Ω—è–π—Ç–µ –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
3. –£–ª—É—á—à–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç –≤ `tj-ml/src/app/services/rag_chain.py`
4. –†–∞—Å—à–∏—Ä—è–π—Ç–µ golden dataset –≤ `tj-ml/src/app/data/eval_golden.json`

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "SECRET_KEY not specified"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `SECRET_KEY` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `backend/.env` –∏–ª–∏ `docker-compose.yaml`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend: `docker compose restart backend`

### –û—à–∏–±–∫–∞ "Invalid token"
- –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–º. —à–∞–≥ 6)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization

### ML —Å–µ—Ä–≤–∏—Å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: `docker compose logs indexer`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs ml`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### –û—à–∏–±–∫–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**GigaChat:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `GIGACHAT_AUTH_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–µ –∏—Å—Ç—ë–∫ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ [developers.sber.ru](https://developers.sber.ru/))
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs ml -f`

**OpenRouter:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `OPENROUTER_API_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ OpenRouter –µ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ (–¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∞ [openrouter.ai/models](https://openrouter.ai/models)
- –î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `:free`) –±–∞–ª–∞–Ω—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs ml -f`

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
1. –û–±–Ω–æ–≤–∏—Ç–µ `LLM_PROVIDER` –≤ `tj-ml/.env`
2. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π API –∫–ª—é—á
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ ML —Å–µ—Ä–≤–∏—Å: `docker compose restart ml`

### –í—ã—Å–æ–∫–∏–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤
- –£–º–µ–Ω—å—à–∏—Ç–µ `top_k` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ) –≤ –∑–∞–ø—Ä–æ—Å–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –º–æ–¥–µ–ª—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç –≤ `tj-ml/src/app/services/rag_chain.py`
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs ml | grep "Token Usage"`

### PostgreSQL –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –æ –≤–µ—Ä—Å–∏–∏ 18+, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `postgres:16` –≤ docker-compose.yaml
- –û—á–∏—Å—Ç–∏—Ç–µ volumes: `docker compose down -v && docker compose up -d`

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ backend/              # FastAPI backend
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/         # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/      # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ migrations/      # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ TJ-Assistant/    # React + Vite –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ tj-ml/               # ML RAG —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/   # RAG, —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, LLM
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/    # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py     # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data/           # –°—Ç–∞—Ç—å–∏ –∏ golden dataset
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.py        # –°–∫—Ä–∏–ø—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ docker-compose.yaml
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Backend

```bash
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ML Service

```bash
cd tj-ml/src
python -m venv venv
source venv/bin/activate
pip install -r ../requirements.txt
uvicorn app.main:app --reload --port 8001
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Frontend

```bash
cd frontend/TJ-Assistant
npm install
npm run dev
```
